<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
google_ad_client: "ca-pub-7674654031652018",
enable_page_level_ads: true
});</script><title> Spring-boot参考（二） · 由来</title><meta name="description" content="Spring-boot参考（二） - kunpengku"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/prontera.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.youletter.cn/atom.xml" title="由来"></head><body><header class="feature-header"><nav class="component-nav"><ul><div class="logo-container"><a href="/"><h2 class="title">由来</h2></a></div><a href="/" target="_self" class="li component-nav-item"><p>主页</p></a><a href="/archives" target="_self" class="li component-nav-item"><p>归档</p></a><a href="/about" target="_self" class="li component-nav-item"><p>关于我</p></a><ul class="shortcut-icons"><a href="https://github.com/kunpengku" target="_blank"><img src="/images/github.svg" class="icon"></a><a href="/atom.xml" target="_blank"><img src="/images/rss.svg" class="icon"></a></ul></ul></nav></header><main class="container"><div id="post-container"><div class="post"><article class="post-block"><h1 class="post-title">Spring-boot参考（二）</h1><div class="post-info">2017年12月2日</div><div class="post-content"><p>Spring-boot参考系列<br><a href="http://youletter.cn/2017/11/30/Spring-boot%E5%8F%82%E8%80%83%EF%BC%88%E4%B8%80%EF%BC%89/" target="_blank" rel="external">Spring-boot参考（一）</a><br><a href="">Spring-boot参考（二）</a></p>
<h1 id="依赖管理"><a href="#依赖管理" class="headerlink" title="依赖管理"></a>依赖管理</h1><p>继承starter parent<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;parent&gt;</div><div class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;1.5.9.RELEASE&lt;/version&gt;</div><div class="line">&lt;/parent&gt;</div></pre></td></tr></table></figure></p>
<p>在parent中，还定义了 其他许多 依赖的版本，如果 想要改变其中某个的话，就应该在properties中 指定其版本，如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;properties&gt;</div><div class="line">    &lt;spring-data-releasetrain.version&gt;Fowler-SR2&lt;/spring-data-releasetrain.version&gt;</div><div class="line">&lt;/properties&gt;</div></pre></td></tr></table></figure></p>
<p>其他支持的属性 可以查看，<a href="https://github.com/spring-projects/spring-boot/blob/v1.5.9.RELEASE/spring-boot-dependencies/pom.xml" target="_blank" rel="external">spring-boot-dependencies</a></p>
<h2 id="不使用parent-POM"><a href="#不使用parent-POM" class="headerlink" title="不使用parent POM"></a>不使用parent POM</h2><p>可能你不想使用parent，或者已经使用了其他parent。 还有一种方法可以用到 spring boot的依赖，即：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;dependencyManagement&gt;</div><div class="line">     &lt;dependencies&gt;</div><div class="line">        &lt;dependency&gt;</div><div class="line">            &lt;!-- Import dependency management from Spring Boot --&gt;</div><div class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">            &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;</div><div class="line">            &lt;version&gt;1.5.9.RELEASE&lt;/version&gt;</div><div class="line">            &lt;type&gt;pom&lt;/type&gt;</div><div class="line">            &lt;scope&gt;import&lt;/scope&gt;</div><div class="line">        &lt;/dependency&gt;</div><div class="line">    &lt;/dependencies&gt;</div><div class="line">&lt;/dependencyManagement&gt;</div></pre></td></tr></table></figure></p>
<p>这是想要改变 spring-boot-dependencies 中的某个 库的版本号 ，应该用下面的方法， 将要改变的部分放在前面：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;dependencyManagement&gt;</div><div class="line">    &lt;dependencies&gt;</div><div class="line">        &lt;!-- Override Spring Data release train provided by Spring Boot --&gt;</div><div class="line">        &lt;dependency&gt;</div><div class="line">            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;</div><div class="line">            &lt;artifactId&gt;spring-data-releasetrain&lt;/artifactId&gt;</div><div class="line">            &lt;version&gt;Fowler-SR2&lt;/version&gt;</div><div class="line">            &lt;scope&gt;import&lt;/scope&gt;</div><div class="line">            &lt;type&gt;pom&lt;/type&gt;</div><div class="line">        &lt;/dependency&gt;</div><div class="line">        &lt;dependency&gt;</div><div class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">            &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;</div><div class="line">            &lt;version&gt;1.5.9.RELEASE&lt;/version&gt;</div><div class="line">            &lt;type&gt;pom&lt;/type&gt;</div><div class="line">            &lt;scope&gt;import&lt;/scope&gt;</div><div class="line">        &lt;/dependency&gt;</div><div class="line">    &lt;/dependencies&gt;</div><div class="line">&lt;/dependencyManagement&gt;</div></pre></td></tr></table></figure>
<p>spring boot 1.5.x 默认支持的JDK 1.6， 如果你想指定 1.8的话，加上一个属性<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;properties&gt;</div><div class="line">    &lt;java.version&gt;1.8&lt;/java.version&gt;</div><div class="line">&lt;/properties&gt;</div></pre></td></tr></table></figure></p>
<h2 id="打包插件"><a href="#打包插件" class="headerlink" title="打包插件"></a>打包插件</h2><p>spring boot提供一个 maven plugin 来生成一个可执行的包。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;build&gt;</div><div class="line">    &lt;plugins&gt;</div><div class="line">        &lt;plugin&gt;</div><div class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</div><div class="line">        &lt;/plugin&gt;</div><div class="line">    &lt;/plugins&gt;</div><div class="line">&lt;/build&gt;</div></pre></td></tr></table></figure>
<p>默认 mvn package 之后 生成的 文件名是 artifactId + version 如：test1-0.0.1-SNAPSHOT.jar  . 如果想生成的文件名就叫 test1，  可以在build中加一个属性 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;build&gt;</div><div class="line">	&lt;finalName&gt;test&lt;/finalName&gt;</div><div class="line">	&lt;plugins&gt;</div><div class="line">		&lt;plugin&gt;</div><div class="line">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">			&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</div><div class="line">		&lt;/plugin&gt;</div><div class="line">	&lt;/plugins&gt;</div><div class="line">&lt;/build&gt;</div></pre></td></tr></table></figure>
<h1 id="Starters"><a href="#Starters" class="headerlink" title="Starters"></a>Starters</h1><p>Starters 是一组 相关的包，这样做是 便于 添加依赖。<br>名字一般是 spring-boot-starter-* 。 </p>
<p>spring 提供了很多starters 都在 org.springframework.boot GroupId下 ，详细见 <a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-starter" target="_blank" rel="external">Spring Boot application starters</a></p>
<p>spring-boot-starter-actuator 这个包在生产环境很有用，提供一些监控方面的支持</p>
<h1 id="结构化代码"><a href="#结构化代码" class="headerlink" title="结构化代码"></a>结构化代码</h1><h2 id="1-要有包名"><a href="#1-要有包名" class="headerlink" title="1 要有包名"></a>1 要有包名</h2><h2 id="SpringBootApplication"><a href="#SpringBootApplication" class="headerlink" title="@SpringBootApplication"></a>@SpringBootApplication</h2><p>这个注解的作用是，指定basePackage，这样Spring就知道去哪里扫描了。</p>
<h2 id="Configuration"><a href="#Configuration" class="headerlink" title="@Configuration"></a>@Configuration</h2><p>被用在一些配置类上， Spring boot 不再鼓励xml的配置方式，而是使用Java代码来配置。 可以写一些单独的类，来进行配置， 这些类上，加上这个注解。</p>
<h2 id="自动配置"><a href="#自动配置" class="headerlink" title="自动配置"></a>自动配置</h2><p>使用<br>@EnableAutoConfiguration 或者 @SpringBootApplication，将开启自动配置功能。<br>自动配置的意思就是，如果你的classpath下有redis的包，即使你自己没有 配置redis ，Spring也会自觉的 连接 localhost:6379 ，来实例化一个RedisConnectionFactory。 这有时会很方便，有时很自以为是很讨厌。</p>
<p>在application.yml 中 设置 debug=true, 在Spring启动时， 会打印出 自动配置了哪些类。</p>
<p>有时候自动配置很讨厌，可以关闭它：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">@Configuration</div><div class="line">@EnableAutoConfiguration(exclude=&#123;DataSourceAutoConfiguration.class&#125;)</div><div class="line">public class MyConfiguration &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>或者使用spring.autoconfigure.exclude 属性在application.yml中。</p>
<p>如果Bean只有一个 构造函数， 可以省略 构造函数上的 @Autowired。</p>
<h1 id="SpringBootApplication-1"><a href="#SpringBootApplication-1" class="headerlink" title="@SpringBootApplication"></a>@SpringBootApplication</h1><p>因为 Spring boot的主函数上 总是有 @Configuration, @EnableAutoConfiguration and @ComponentScan 这三个注解， 于是Springboot 提供了一个新的注解 @SpringBootApplication 来等效表示这三个注解。</p>
<h1 id="如何运行程序"><a href="#如何运行程序" class="headerlink" title="如何运行程序"></a>如何运行程序</h1><h2 id="1，在IDE运行，这样方便调试。"><a href="#1，在IDE运行，这样方便调试。" class="headerlink" title="1，在IDE运行，这样方便调试。"></a>1，在IDE运行，这样方便调试。</h2><h2 id="2-打成jar包"><a href="#2-打成jar包" class="headerlink" title="2 , 打成jar包"></a>2 , 打成jar包</h2><p>java -jar target/myproject-0.0.1-SNAPSHOT.jar</p>
<p>在生产环境时， 需要再多加一些参数，修改内存，堆栈之类。</p>
<h2 id="3-用mvn运行"><a href="#3-用mvn运行" class="headerlink" title="3 用mvn运行"></a>3 用mvn运行</h2><p>mvn spring-boot:run</p>
<h1 id="自动重启"><a href="#自动重启" class="headerlink" title="自动重启"></a>自动重启</h1><p>在开发时候 ，修改一个地方，往往需要重新启动。<br>增加下面这个依赖，可以自动监听 classpath下的文件，有变动时，自动重启。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">	&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;</div><div class="line">	&lt;optional&gt;true&lt;/optional&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure>
<p>IDEA中，出发重启的方法是，修改完文件后 Build -&gt; Make Project。 </p>
</div></article></div><div id="disqus_thread"></div></div><div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;"><img src="/images/wechat_reward.png" width="180px"><p>简单点，讨钱的方式简单点</p><button style="display: inline-block;      width: 80px;      height: 35px;      border-radius: 5px;      color: #fff;      font-weight: 400;      font-style: normal;      font-variant: normal;      font-stretch: normal;      font-size: 18px;      background: #f44336;"><span>赏</span></button></div><div id="ads"></div><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 底部01--><ins style="display:block" data-ad-client="ca-pub-7674654031652018" data-ad-slot="3127803056" data-ad-format="auto" class="adsbygoogle"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});

</script><div id="SOHUCS"></div><script charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/changyan.js"></script><script type="text/javascript">window.changyan.api.config({
appid: 'cytkri3BC',
conf: 'prod_1e787a373da7a5fa9ef7156a6dae5e6b'
});
</script></main><footer class="footer-container"><div class="paginator"><a href="/2017/12/02/Spring-initializr使用/" class="next">下一篇</a></div><div class="copyright"><p>© 2017 <a href="mailto:fupeng_2005@126.com">kunpengku</a>, <a href="http://www.miitbeian.gov.cn">京ICP备17058936号-1</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/AngryPowman/hexo-theme-prontera" target="_blank">hexo-theme-prontera</a>.</p></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"angrypowman",'auto');ga('send','pageview');</script></body></html>