<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
google_ad_client: "ca-pub-7674654031652018",
enable_page_level_ads: true
});</script><title> Java中4种方法将String转为JSON · 由来</title><meta name="description" content="Java中4种方法将String转为JSON - kunpengku"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/prontera.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.youletter.cn/atom.xml" title="由来"></head><body><header class="feature-header"><nav class="component-nav"><ul><div class="logo-container"><a href="/"><h2 class="title">由来</h2></a></div><a href="/" target="_self" class="li component-nav-item"><p>主页</p></a><a href="/archives" target="_self" class="li component-nav-item"><p>归档</p></a><ul class="shortcut-icons"><a href="https://github.com/kunpengku" target="_blank"><img src="/images/github.svg" class="icon"></a><a href="/atom.xml" target="_blank"><img src="/images/rss.svg" class="icon"></a></ul></ul></nav></header><main class="container"><div id="post-container"><div class="post"><article class="post-block"><h1 class="post-title">Java中4种方法将String转为JSON</h1><div class="post-info">2017年11月16日</div><div class="post-content"><p>如何将一个Json的字符串转换成 JSON Object，目前JDK并不支持这种转换，好在有一些开源的库可以帮助做这件事，比如Gson , Jackson, 和 json-simple。这个教程就是介绍这三个库的用法。</p>
<p>我们的例子中，要转换的字符串是下面这个</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">jsonString = &#123;</div><div class="line">  <span class="string">"name"</span> : <span class="string">"kpk"</span>,</div><div class="line">  <span class="string">"company"</span> : <span class="string">"soccer"</span>,</div><div class="line">  <span class="string">"score"</span> : [ <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span> ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Gson-实现-String-to-JSON-Object"><a href="#Gson-实现-String-to-JSON-Object" class="headerlink" title="Gson 实现 String to JSON Object"></a>Gson 实现 String to JSON Object</h1><p>添加依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">    &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;gson&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;2.8.0&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure>
<p>只需要两行就可以实现转换</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Gson g = <span class="keyword">new</span> Gson();</div><div class="line">SimpleOne p = g.fromJson(jsonString, SimpleOne.class);</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>首先需要写一个class用于接收字符串转化后的对象。我们这里是 SimpleOne</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleOne</span> </span>&#123;</div><div class="line">    String name;</div><div class="line">    String company;</div><div class="line">    List&lt;Long&gt; score;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"SimpleOne&#123;"</span> + <span class="string">"name='"</span> + name + <span class="string">'\''</span> + <span class="string">", company='"</span> + company + <span class="string">'\''</span> + <span class="string">", score="</span> + score + <span class="string">'&#125;'</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>也可以将一个对象转换为 json字符串，如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String str = g.toJson(p);</div></pre></td></tr></table></figure>
<p>测试代码为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GsonTest</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        String jsonString = <span class="string">"&#123;\"name\":\"kpk\", \"company\":\"apple\", \"score\":[1,2,3]&#125;"</span>;</div><div class="line"></div><div class="line">		<span class="comment">// string 到 对象</span></div><div class="line">        Gson g = <span class="keyword">new</span> Gson();</div><div class="line">        SimpleOne p = g.fromJson(jsonString, SimpleOne.class);</div><div class="line">        System.out.println(p);</div><div class="line">        <span class="comment">// 对象 到 json string</span></div><div class="line">        String str = g.toJson(p);</div><div class="line">        System.out.println(str);</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="使用-JSON-Simple-进行-JSON-String-to-Java-object"><a href="#使用-JSON-Simple-进行-JSON-String-to-Java-object" class="headerlink" title="使用 JSON-Simple 进行 JSON String to Java object"></a>使用 JSON-Simple 进行 JSON String to Java object</h1><p>JSON-Simple的特点是占用内存小，适用于内存紧张的场景，如J2ME 和 Android。</p>
<p>依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">    &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;json-simple&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;1.1.1&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure>
<p>要注意引用正确的JSONObject和JSONParser的包。</p>
<p>测试代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> kpk;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.json.simple.JSONObject;</div><div class="line"><span class="keyword">import</span> org.json.simple.parser.JSONParser;</div><div class="line"><span class="keyword">import</span> org.json.simple.parser.ParseException;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Description</span></div><div class="line"><span class="comment"> * &lt;p&gt;</span></div><div class="line"><span class="comment"> * &lt;/p&gt;</span></div><div class="line"><span class="comment"> * DATE 17/11/15.</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * <span class="doctag">@author</span> fupeng.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JSONSimpleTest</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException </span>&#123;</div><div class="line">        String jsonString = <span class="string">"&#123;\"name\":\"kpk\", \"company\":\"apple\", \"score\":[1,2,3]&#125;"</span>;</div><div class="line"></div><div class="line">        JSONParser parser = <span class="keyword">new</span> JSONParser();</div><div class="line">        JSONObject json = (JSONObject) parser.parse(jsonString);</div><div class="line"></div><div class="line">        System.out.println(json);</div><div class="line">        System.out.println(json.get(<span class="string">"name"</span>));</div><div class="line">        System.out.println(json.get(<span class="string">"company"</span>));</div><div class="line">        System.out.println(json.get(<span class="string">"score"</span>));</div><div class="line"></div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>json-simple 兼容jdk1.2  好像在2012年这个包就不更新了。 所以，现在不建议使用这种方法来 反序列化json字符串。应该算是历史的产物。<br>这种方法不需要你实现定义一个对象，它用HashMap来存储对象。</p>
<h1 id="Jackson"><a href="#Jackson" class="headerlink" title="Jackson"></a>Jackson</h1><p>依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;2.9.1&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div><div class="line">&lt;dependency&gt;</div><div class="line">    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;2.8.10&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure>
<p>Jackson 示例如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> kpk;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JacksonTest</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">        String jsonString = <span class="string">"&#123;\"name\":\"kpk\", \"company\":\"apple\", \"score\":[1,2,3]&#125;"</span>;</div><div class="line">        SimpleOne ronaldo = <span class="keyword">new</span> ObjectMapper().readValue(jsonString, SimpleOne.class);</div><div class="line">        System.out.println(ronaldo);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Jackson 也需要定义一个POJO的类，而且还必须有setter/getter的方法，不然会报错。<br>据说Jackson在Java的世界非常流行，可以处理非常的大的Json字符串的转化，性能很好。</p>
<h1 id="FastJson"><a href="#FastJson" class="headerlink" title="FastJson"></a>FastJson</h1><p>alibaba出品的Json工具，阿里的技术棒棒的。</p>
<p>Fastjson Quick Start</p>
<p><a href="https://github.com/alibaba/fastjson/wiki/Samples-DataBind" target="_blank" rel="external">https://github.com/alibaba/fastjson/wiki/Samples-DataBind</a></p>
<p>依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;1.2.40&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure>
<p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FastJsonTest</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        String jsonString = <span class="string">"&#123;\"name\":\"kpk\", \"company\":\"apple\", \"score\":[1,2,3]&#125;"</span>;</div><div class="line">        SimpleOne p = JSON.parseObject(jsonString, SimpleOne.class);</div><div class="line">        System.out.println(p);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>我会使用 Gson 或者 fastjson ，比较简便。</p>
<p>json-simple基本上过时了。</p>
<p>Jackson没用过</p>
<p>原文地址 <a href="http://www.java67.com/2016/10/3-ways-to-convert-string-to-json-object-in-java.html" target="_blank" rel="external">http://www.java67.com/2016/10/3-ways-to-convert-string-to-json-object-in-java.html</a></p>
</div></article></div><div id="disqus_thread"></div></div><div id="SOHUCS"></div><script charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/changyan.js"></script><script type="text/javascript">window.changyan.api.config({
appid: 'cytkri3BC',
conf: 'prod_1e787a373da7a5fa9ef7156a6dae5e6b'
});
</script></main><footer class="footer-container"><div class="paginator"><a href="/2017/11/16/spring-cloud-netflix之服务发现Eureka-Server/" class="prev">PREV</a><a href="/2017/11/10/Java-Enum用法/" class="next">NEXT</a></div><div class="copyright"><p>© 2017 <a href="mailto:fupeng_2005@126.com">kunpengku</a>, <a href="http://www.miitbeian.gov.cn">京ICP备17058936号-1</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/AngryPowman/hexo-theme-prontera" target="_blank">hexo-theme-prontera</a>.</p></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"angrypowman",'auto');ga('send','pageview');</script></body></html>