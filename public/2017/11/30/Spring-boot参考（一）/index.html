<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
google_ad_client: "ca-pub-7674654031652018",
enable_page_level_ads: true
});</script><title> Spring-boot参考（一） · 由来</title><meta name="description" content="Spring-boot参考（一） - kunpengku"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/prontera.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.youletter.cn/atom.xml" title="由来"></head><body><header class="feature-header"><nav class="component-nav"><ul><div class="logo-container"><a href="/"><h2 class="title">由来</h2></a></div><a href="/" target="_self" class="li component-nav-item"><p>主页</p></a><a href="/archives" target="_self" class="li component-nav-item"><p>归档</p></a><a href="/about" target="_self" class="li component-nav-item"><p>关于我</p></a><ul class="shortcut-icons"><a href="https://github.com/kunpengku" target="_blank"><img src="/images/github.svg" class="icon"></a><a href="/atom.xml" target="_blank"><img src="/images/rss.svg" class="icon"></a></ul></ul></nav></header><main class="container"><div id="post-container"><div class="post"><article class="post-block"><h1 class="post-title">Spring-boot参考（一）</h1><div class="post-info">2017年11月30日</div><div class="post-content"><p>Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically.</p>
<p><a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/" target="_blank" rel="external">官方文档地址</a></p>
<p>我们(Spring-boot)对Spring平台和第三方库有自己的看法，言外之意Spring-boot有大量的默认配置。所以，用户什么配置都没有，依然可以启动。然后在开发过程中，只修改那些默认配置不能满足需要的地方。</p>
<h3 id="Spring-boot的目标："><a href="#Spring-boot的目标：" class="headerlink" title="Spring-boot的目标："></a>Spring-boot的目标：</h3><ul>
<li>为所有Spring开发提供一个更快，更广泛的入门体验。</li>
<li>开箱即用，但是随着需求开始偏离默认值，便于修改。</li>
<li>提供大量 项目通用的一系列非功能性组件（如嵌入式服务器，安全性，指标，运行状况检查和外部配置）。</li>
<li>绝对不会生成代码，也不需要XML配置。</li>
</ul>
<a id="more"></a>
<h3 id="JDK要求"><a href="#JDK要求" class="headerlink" title="JDK要求"></a>JDK要求</h3><p>Spring Boot 1.5.9.RELEASE 要求 Java 7 和 Spring Framework 4.3.13.RELEASE 以上<br>Spring Boot 2.0.0.BUILD-SNAPSHOT 要求 Java 8 和 Spring Framework 5.0.2.RELEASE 以上，<br>目前 Spring boot 还不是稳定版，生产环境还应是使用1.5.x。</p>
<h3 id="内嵌Tomcat"><a href="#内嵌Tomcat" class="headerlink" title="内嵌Tomcat"></a>内嵌Tomcat</h3><ul>
<li>Tomcat8 3.1  </li>
<li>Jetty9.3 3.1</li>
<li>Undertow1.3 3.1  </li>
</ul>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>推荐使用Maven或Gradle来安装Spring boot依赖的jar包</p>
<p>Maven3.2以上</p>
<p>一个典型的pom文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</div><div class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</div><div class="line"></div><div class="line">    &lt;groupId&gt;com.example&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;myproject&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</div><div class="line"></div><div class="line">    &lt;!-- Inherit defaults from Spring Boot --&gt;</div><div class="line">    &lt;parent&gt;</div><div class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</div><div class="line">        &lt;version&gt;1.5.9.RELEASE&lt;/version&gt;</div><div class="line">    &lt;/parent&gt;</div><div class="line"></div><div class="line">    &lt;!-- Add typical dependencies for a web application --&gt;</div><div class="line">    &lt;dependencies&gt;</div><div class="line">        &lt;dependency&gt;</div><div class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</div><div class="line">        &lt;/dependency&gt;</div><div class="line">    &lt;/dependencies&gt;</div><div class="line"></div><div class="line">    &lt;!-- 这个插件，可以帮助 打一个可执行的jar包 --&gt;</div><div class="line">    &lt;build&gt;</div><div class="line">        &lt;plugins&gt;</div><div class="line">            &lt;plugin&gt;</div><div class="line">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</div><div class="line">            &lt;/plugin&gt;</div><div class="line">        &lt;/plugins&gt;</div><div class="line">    &lt;/build&gt;</div><div class="line"></div><div class="line">&lt;/project&gt;</div></pre></td></tr></table></figure></p>
<p>Spring boot依赖org.springframework.boot 这个GroupId，一般需要继承 spring-boot-starter-parent。</p>
<p>Spring 还提供了一个 命令行的工具 ，也叫Spring 。感觉用处不大。</p>
<p>查看这个网页 <a href="https://github.com/spring-projects/spring-boot/wiki" target="_blank" rel="external">project wiki</a> 可以找到Spring boot的更新情况和值得关注的事。</p>
<p><a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Migration-Guide" target="_blank" rel="external">Spring Boot 1.5向2.0迁移指南</a></p>
<h1 id="开发第一个Spring-boot的程序"><a href="#开发第一个Spring-boot的程序" class="headerlink" title="开发第一个Spring boot的程序"></a>开发第一个Spring boot的程序</h1><p><a href="https://start.spring.io/" target="_blank" rel="external">SPRING INITIALIZR</a>可以快速生成一个工程。</p>
<p>Maven 默认会编译 src/main/java下的文件。</p>
<p>FirstHelloApplication.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">package com.kunpengku.firsthello;</div><div class="line"></div><div class="line">import org.springframework.boot.SpringApplication;</div><div class="line">import org.springframework.boot.autoconfigure.EnableAutoConfiguration;</div><div class="line">import org.springframework.web.bind.annotation.RequestMapping;</div><div class="line">import org.springframework.web.bind.annotation.RestController;</div><div class="line"></div><div class="line">@RestController</div><div class="line">@EnableAutoConfiguration</div><div class="line">public class FirstHelloApplication &#123;</div><div class="line"></div><div class="line">	@RequestMapping(&quot;/&quot;)</div><div class="line">	String home() &#123;</div><div class="line">		return &quot;Hello World!&quot;;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public static void main(String[] args) &#123;</div><div class="line">		SpringApplication.run(FirstHelloApplication.class, args);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>第一个helloworld 写完了。</p>
<p>mvn spring-boot:run 使用命令启动程序</p>
<p>或者在Idea 中启动程序。 然后访问 <a href="http://localhost:8080/" target="_blank" rel="external">http://localhost:8080/</a> 就能看到 hello world。</p>
<h1 id="第一个注解-RestController"><a href="#第一个注解-RestController" class="headerlink" title="第一个注解@RestController"></a>第一个注解@RestController</h1><p>这个注解说明 这个类是一个@Controller，当有请求来的时候，会考虑它。</p>
<p>@RequestMapping 这个注解则指定 某个 路由，有哪个方法来出来。</p>
<h2 id="EnableAutoConfiguration-注解"><a href="#EnableAutoConfiguration-注解" class="headerlink" title="@EnableAutoConfiguration 注解"></a>@EnableAutoConfiguration 注解</h2><p>Spring会根据你添加的jar包，来”guess”配置。</p>
<p>Starters 设计就是和 Auto-Configuration 一起工作的。</p>
<h2 id="启动程序"><a href="#启动程序" class="headerlink" title="启动程序"></a>启动程序</h2><ul>
<li>命令行 mvn spring-boot:run</li>
<li>Idea 在main方法上 ，右键 -&gt; “run FirstHelloApplication” </li>
</ul>
<p>Spring boot 会自动启动内置的 Tomcat 服务器。<br>启动以后，访问 <a href="http://localhost:8080/" target="_blank" rel="external">http://localhost:8080/</a> 即可看到<br>Hello World!</p>
<h2 id="生成一个可执行的jar包"><a href="#生成一个可执行的jar包" class="headerlink" title="生成一个可执行的jar包"></a>生成一个可执行的jar包</h2><p>在生产环境，需要一个可执行的jar包来运行。<br>为了生成这个jar包，我们的pom文件中有这么一段</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;build&gt;</div><div class="line">    &lt;plugins&gt;</div><div class="line">        &lt;plugin&gt;</div><div class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</div><div class="line">        &lt;/plugin&gt;</div><div class="line">    &lt;/plugins&gt;</div><div class="line">&lt;/build&gt;</div></pre></td></tr></table></figure>
<p>而且在继承的spring-boot-starter-parent中，已经包含了 <figure class="highlight plain"><figcaption><span>配置了 repackage 目标.</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">关于插件的详细文档: [Spring Boot Maven Plugin](https://docs.spring.io/spring-boot/docs/1.5.9.RELEASE/maven-plugin/usage.html)</div><div class="line"></div><div class="line"></div><div class="line">## 打包</div></pre></td></tr></table></figure></p>
<p>fupeng@bogon:~/java/spring-cloud/first-hello$ mvn package<br>[INFO] Scanning for projects…<br>[INFO]<br>[INFO]<br>…</p>
<hr>
<h2 id="T-E-S-T-S"><a href="#T-E-S-T-S" class="headerlink" title=" T E S T S"></a> T E S T S</h2><p>Running com.kunpengku.firsthello.FirstHelloApplicationTests<br>Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec - in com.kunpengku.firsthello.FirstHelloApplicationTests</p>
<p>Results :</p>
<p>Tests run: 0, Failures: 0, Errors: 0, Skipped: 0</p>
<p>[INFO]<br>[INFO] — maven-jar-plugin:2.6:jar (default-jar) @ first-hello —<br>[INFO] Building jar: /Users/fupeng/java/spring-cloud/first-hello/target/first-hello-0.0.1-SNAPSHOT.jar<br>[INFO]<br>[INFO] — spring-boot-maven-plugin:1.5.9.RELEASE:repackage (default) @ first-hello —<br>[INFO] ————————————————————————<br>[INFO] BUILD SUCCESS<br>[INFO] ————————————————————————<br>[INFO] Total time: 5.242 s<br>[INFO] Finished at: 2017-11-30T10:28:24+08:00<br>[INFO] Final Memory: 26M/210M<br>[INFO] ————————————————————————<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">使用 java -jar 命令运行</div></pre></td></tr></table></figure></p>
<p>java -jar target/first-hello-0.0.1-SNAPSHOT.jar</p>
<p>  .   <strong>_<em>          </em>            </strong> <em> </em><br> /\ / <strong><em>‘</em> </strong> <em> </em>(<em>)</em> <strong>  </strong> <em> \ \ \ \<br>( ( )__</em> | ‘<em> | ‘</em>| | ‘<em> \/ </em>` | \ \ \ \<br> \/  <strong><em>)| |</em>)| | | | | || (_| |  ) ) ) )<br>  ‘  |__</strong>| .<strong>|<em>| |</em>|<em>| |</em>\</strong>, | / / / /<br> =========|<em>|==============|__</em>/=/<em>/</em>/_/<br> :: Spring Boot ::        (v1.5.9.RELEASE)</p>
<p>2017-11-30 10:33:17.425  INFO 64214 — [           main] c.k.firsthello.FirstHelloApplication     : Starting FirstHelloApplication v0.0.1-SNAPSHOT on bogon with PID 64214 (/Users/fupeng/java/spring-cloud/first-hello/target/first-hello-0.0.1-SNAPSHOT.jar started by fupeng in /Users/fupeng/java/spring-cloud/first-hello)<br>2017-11-30 10:33:17.436  INFO 64214 — [           main] c.k.firsthello.FirstHelloApplication     : No active profile set, falling back to default profiles: default<br>2017-11-30 10:33:17.533  INFO 64214 — [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@45ff54e6: startup date [Thu Nov 30 10:33:17 CST 2017]; root of context hierarchy<br>2017-11-30 10:33:19.669  INFO 64214 — [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat initialized with port(s): 8080 (http)<br>2017-11-30 10:33:19.692  INFO 64214 — [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]<br>2017-11-30 10:33:19.695  INFO 64214 — [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.23<br>2017-11-30 10:33:19.856  INFO 64214 — [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext<br>2017-11-30 10:33:19.857  INFO 64214 — [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 2327 ms<br>2017-11-30 10:33:20.054  INFO 64214 — [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Mapping servlet: ‘dispatcherServlet’ to [/]<br>2017-11-30 10:33:20.060  INFO 64214 — [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: ‘characterEncodingFilter’ to: [/<em>]<br>2017-11-30 10:33:20.061  INFO 64214 — [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: ‘hiddenHttpMethodFilter’ to: [/</em>]<br>2017-11-30 10:33:20.061  INFO 64214 — [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: ‘httpPutFormContentFilter’ to: [/<em>]<br>2017-11-30 10:33:20.061  INFO 64214 — [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: ‘requestContextFilter’ to: [/</em>]<br>2017-11-30 10:33:20.524  INFO 64214 — [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@45ff54e6: startup date [Thu Nov 30 10:33:17 CST 2017]; root of context hierarchy<br>2017-11-30 10:33:20.688  INFO 64214 — [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/]}” onto java.lang.String com.kunpengku.firsthello.FirstHelloApplication.home()<br>2017-11-30 10:33:20.695  INFO 64214 — [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/error]}” onto public org.springframework.http.ResponseEntity<java.util.map<java.lang.string, java.lang.object="">&gt; org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)<br>2017-11-30 10:33:20.696  INFO 64214 — [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped “{[/error],produces=[text/html]}” onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)<br>2017-11-30 10:33:20.757  INFO 64214 — [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/<strong>] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]<br>2017-11-30 10:33:20.757  INFO 64214 — [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/</strong>] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]<br>2017-11-30 10:33:20.848  INFO 64214 — [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]<br>2017-11-30 10:33:21.093  INFO 64214 — [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup<br>2017-11-30 10:33:21.183  INFO 64214 — [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat started on port(s): 8080 (http)<br>2017-11-30 10:33:21.190  INFO 64214 — [           main] c.k.firsthello.FirstHelloApplication     : Started FirstHelloApplication in 4.357 seconds (JVM running for 5.354)<br>^[[O2017-11-30 10:33:28.220  INFO 64214 — [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring FrameworkServlet ‘dispatcherServlet’<br>2017-11-30 10:33:28.220  INFO 64214 — [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : FrameworkServlet ‘dispatcherServlet’: initialization started<br>2017-11-30 10:33:28.243  INFO 64214 — [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : FrameworkServlet ‘dispatcherServlet’: initialization completed in 23 ms</java.util.map<java.lang.string,></p>
<p>```<br>本文的 工程放到github上<br><a href="https://github.com/kunpengku/first-hello" target="_blank" rel="external">first-hello</a></p>
<p><a href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples" target="_blank" rel="external">更多Spring-boot例子</a></p>
</div></article></div><div id="disqus_thread"></div></div><div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;"><img src="/images/wechat_reward.png" width="180px"><p>简单点，讨钱的方式简单点</p><button style="display: inline-block;      width: 80px;      height: 35px;      border-radius: 5px;      color: #fff;      font-weight: 400;      font-style: normal;      font-variant: normal;      font-stretch: normal;      font-size: 18px;      background: #f44336;"><span>赏</span></button></div><div id="ads"></div><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 底部01--><ins style="display:block" data-ad-client="ca-pub-7674654031652018" data-ad-slot="3127803056" data-ad-format="auto" class="adsbygoogle"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});

</script><div id="SOHUCS"></div><script charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/changyan.js"></script><script type="text/javascript">window.changyan.api.config({
appid: 'cytkri3BC',
conf: 'prod_1e787a373da7a5fa9ef7156a6dae5e6b'
});
</script></main><footer class="footer-container"><div class="paginator"><a href="/2017/11/29/spring-cloud-简介/" class="next">NEXT</a></div><div class="copyright"><p>© 2017 <a href="mailto:fupeng_2005@126.com">kunpengku</a>, <a href="http://www.miitbeian.gov.cn">京ICP备17058936号-1</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/AngryPowman/hexo-theme-prontera" target="_blank">hexo-theme-prontera</a>.</p></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"angrypowman",'auto');ga('send','pageview');</script></body></html>